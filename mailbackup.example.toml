# Example TOML configuration for mailbackup
# Copy to: /etc/mailbackup.toml or ~/.config/mailbackup.toml

[paths]
maildir = "/srv/mailbackup/maildir"
attachments_dir = "/srv/mailbackup/attachments"
db_path = "/srv/mailbackup/state.db"
log_path = "/var/log/mailbackup/sync.log"
tmp_dir = "/srv/mailbackup/staging"
archive_dir = "/srv/mailbackup/archives"
manifest_path = "/srv/mailbackup/manifest.csv"
# rclone remote name plus path, e.g. "nextcloud:Backups/Email"
remote = "nextcloud:Backups/Email"

[rotation]
retention_years = 2
keep_local_after_archive = false

[integrity]
verify_integrity = true
repair_on_failure = true
max_hash_threads = 8

[manifest]
remote_name = "manifest.csv"
max_manifest_conflict_retries = 3

[logging]
# how often the status line is printed (seconds)
status_interval = 300

[performance]
# number of parallel upload workers (I/O bound). Tune per backend.
max_upload_workers = 4
# extractor parallelism (keep 1 if attachment dir layout isn't per-email unique)
max_extract_workers = 1

[fetch]
# the fetch command to run to fetch new mail into maildir. Must exist on PATH.
command = "mbsync -V -a"

[rclone]
log_level = "INFO"
transfers = 8
multi_thread_streams = 4